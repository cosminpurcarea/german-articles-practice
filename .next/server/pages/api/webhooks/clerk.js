"use strict";(()=>{var e={};e.id=719,e.ids=[719],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,r)=>{Object.defineProperty(r,"l",{enumerable:!0,get:function(){return function e(r,s){return s in r?r[s]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,s)):"function"==typeof r&&"default"===s?r:void 0}}})},8725:(e,r,s)=>{s.r(r),s.d(r,{config:()=>h,default:()=>f,routeModule:()=>g});var t={};s.r(t),s.d(t,{config:()=>d,default:()=>m});var o=s(1802),n=s(7153),i=s(6249);let a=require("@supabase/supabase-js"),u="https://gymnbgklicdjeuhsdjhn.supabase.co",c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd5bW5iZ2tsaWNkamV1aHNkamhuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE1MDgwMzgsImV4cCI6MjA1NzA4NDAzOH0.oQ92GvKxpoMBdrVX8SaVzsZkGiLMgL_zxh72zi0cK0g";console.log("Supabase URL set?",!!u),console.log("Supabase Key set?",!!c),u&&c||console.error("Supabase URL or Anon Key is missing. Check your .env.local file.");let l=(0,a.createClient)(u,c,{auth:{persistSession:!1,autoRefreshToken:!1},db:{schema:"public"},global:{headers:{"x-my-custom-header":"practice-app"}}});console.log("Supabase client initialized with URL:",u),function(){var e=Error("Cannot find module 'svix'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'micro'");throw e.code="MODULE_NOT_FOUND",e}();let d={api:{bodyParser:!1}},p=process.env.CLERK_WEBHOOK_SECRET;async function m(e,r){let s;if("POST"!==e.method)return r.status(405).json({message:"Method not allowed"});let t=await Object(function(){var e=Error("Cannot find module 'micro'");throw e.code="MODULE_NOT_FOUND",e}())(e),o=e.headers,n=Object(function(){var e=Error("Cannot find module 'svix'");throw e.code="MODULE_NOT_FOUND",e}())(p);try{s=n.verify(t,{"svix-id":o["svix-id"],"svix-timestamp":o["svix-timestamp"],"svix-signature":o["svix-signature"]})}catch(e){return console.error("Error verifying webhook:",e),r.status(400).json({message:"Invalid webhook"})}let i=s.type;if("user.created"===i||"user.updated"===i){let{id:e,email_addresses:t,first_name:o,last_name:n}=s.data,i=t[0]?.email_address;try{let{data:s,error:t}=await l.rpc("handle_clerk_user_sync",{clerk_user_id:e,email:i,first_name:o,last_name:n});if(t)throw t;return r.status(200).json({message:"User synced successfully",userId:s})}catch(e){return console.error("Error syncing user:",e),r.status(500).json({message:"Error syncing user"})}}return r.status(200).json({message:"Webhook processed"})}let f=(0,i.l)(t,"default"),h=(0,i.l)(t,"config"),g=new o.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/webhooks/clerk",pathname:"/api/webhooks/clerk",bundlePath:"",filename:""},userland:t})},7153:(e,r)=>{var s;Object.defineProperty(r,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},1802:(e,r,s)=>{e.exports=s(145)}};var r=require("../../../webpack-api-runtime.js");r.C(e);var s=r(r.s=8725);module.exports=s})();