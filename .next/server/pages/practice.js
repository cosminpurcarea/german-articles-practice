(()=>{var e={};e.id=991,e.ids=[991,888,660],e.modules={4824:(e,s,t)=>{"use strict";t.r(s),t.d(s,{config:()=>y,default:()=>b,getServerSideProps:()=>N,getStaticPaths:()=>j,getStaticProps:()=>f,reportWebVitals:()=>v,routeModule:()=>k,unstable_getServerProps:()=>_,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>C,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>w});var r={};t.r(r),t.d(r,{default:()=>p});var a=t(7093),l=t(5244),i=t(1323),n=t(2899),o=t.n(n),c=t(3414),d=t(997),m=t(6689),x=t(1398),u=t(8316),h=t(3300),g=t(6515);function p(){let{user:e}=(0,h.useUser)(),[s,t]=(0,m.useState)({numberOfNouns:10,secondsPerQuestion:5}),[r,a]=(0,m.useState)(!0),[l,i]=(0,m.useState)(null),[n,o]=(0,m.useState)(null),[c,p]=(0,m.useState)([]),[b,f]=(0,m.useState)([]),[j,N]=(0,m.useState)(null),[y,v]=(0,m.useState)(null);(0,m.useRef)(null);let[w,S]=(0,m.useState)(!1),[C,_]=(0,m.useState)(!1),[P,k]=(0,m.useState)({message:"",isCorrect:!1}),[I,R]=(0,m.useState)(null),L=e=>{let{name:r,value:a}=e.target;t({...s,[r]:parseInt(a,10)})},M=async()=>{try{S(!0);let{data:t,error:r}=await u.Z.from("practice_sessions").insert({user_id:e.id,total_questions:s.numberOfNouns,seconds_per_question:s.secondsPerQuestion,status:"in_progress",created_at:new Date().toISOString(),correct_count:0,success_rate:0}).select().single();if(r)throw r;let{data:l,error:n}=await u.Z.from("nouns").select(`
          id,
          word,
          article,
          translation,
          rule
        `);if(n)throw n;if(!l||0===l.length){alert("No nouns found in the database. Please add some nouns first.");return}let c=[...l].sort(()=>Math.random()-.5).slice(0,s.numberOfNouns);p(c),i(t),o(0),N(s.secondsPerQuestion),f([]),a(!1)}catch(e){console.error("Error starting session:",e),alert(`Failed to start session: ${e.message||"Unknown error"}`)}finally{S(!1)}},A=e=>{let t=s.secondsPerQuestion-j,r={noun:c[n],answer:e,isCorrect:e===c[n].article,responseTime:t,timestamp:new Date().toISOString()},a=[...b,r];f(a),k({message:r.isCorrect?"Correct!":`Incorrect. The correct article is "${c[n].article}"`,isCorrect:r.isCorrect}),_(!0),setTimeout(()=>_(!1),2e3),n<c.length-1?(o(n+1),N(s.secondsPerQuestion)):z(a)},z=async s=>{if(!y)try{let t=s.filter(e=>e.isCorrect).length,r=Math.round(t/s.length*100),a=s.filter(e=>null!==e.answer).map(e=>e.responseTime),i={status:"completed",correct_count:t,success_rate:r,completed_at:new Date().toISOString(),average_response_time_ms:a.length>0?Math.round(1e3*a.reduce((e,s)=>e+s,0)/a.length):null,fastest_time:a.length>0?Math.min(...a):null,average_time:a.length>0?a.reduce((e,s)=>e+s,0)/a.length:null,timeouts:s.filter(e=>null===e.answer).length};console.log("Updating session with:",i);let{data:n,error:o}=await u.Z.from("practice_sessions").update(i).eq("id",l.id).select();if(o)throw console.error("Error updating session:",o),o;let c=s.map(s=>({user_id:e.id,session_id:l.id,noun_id:s.noun.id,user_answer:s.answer,is_correct:s.isCorrect,response_time:s.responseTime,created_at:s.timestamp})),{error:d}=await u.Z.from("session_answers").insert(c);d&&console.error("Error saving answers:",d),v({correct:t,total:s.length,accuracy:r,fastestResponse:a.length>0?Math.min(...a).toFixed(3):"N/A",averageTime:a.length>0?(a.reduce((e,s)=>e+s,0)/a.length).toFixed(3):"N/A",timeouts:s.filter(e=>null===e.answer).length})}catch(e){console.error("Error finishing session:",e),v({correct:s.filter(e=>e.isCorrect).length,total:s.length,accuracy:Math.round(s.filter(e=>e.isCorrect).length/s.length*100),fastestResponse:"Error",averageTime:"Error",timeouts:s.filter(e=>null===e.answer).length})}},q=async e=>{try{let{data:s,error:t}=await u.Z.from("nouns").select("*").eq("id",e.noun.id).single();if(t)throw t;R(s)}catch(e){console.error("Error fetching word details:",e)}};return d.jsx(x.Z,{children:(0,d.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[d.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Practice German Articles"}),C&&d.jsx("div",{className:`mb-4 p-3 rounded-md shadow-md fixed top-4 right-4 left-4 md:left-auto md:w-1/3 z-50 transform transition-transform duration-300 ease-in-out ${P.isCorrect?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,children:(0,d.jsxs)("div",{className:"flex",children:[d.jsx("div",{className:"flex-shrink-0",children:P.isCorrect?d.jsx("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):d.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),d.jsx("div",{className:"ml-3",children:d.jsx("p",{className:"text-sm font-medium",children:P.message})})]})}),r?(0,d.jsxs)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[d.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-1",children:"Session Setup"}),d.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Configure your practice session"}),(0,d.jsxs)("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"numberOfNouns",className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of nouns"}),d.jsx("input",{type:"number",name:"numberOfNouns",id:"numberOfNouns",min:"1",max:"50",value:s.numberOfNouns,onChange:L,className:"block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,d.jsxs)("div",{className:"mb-6",children:[d.jsx("label",{htmlFor:"secondsPerQuestion",className:"block text-sm font-medium text-gray-700 mb-1",children:"Seconds per question"}),d.jsx("input",{type:"number",name:"secondsPerQuestion",id:"secondsPerQuestion",min:"1",max:"60",value:s.secondsPerQuestion,onChange:L,className:"block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),d.jsx("div",{className:"text-center",children:d.jsx("button",{type:"button",onClick:M,disabled:w,className:"inline-flex justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300",children:w?"Loading...":"Start Session"})})]}):y?(0,d.jsxs)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[d.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Session Results"}),(0,d.jsxs)("div",{className:"mb-8 text-center",children:[(0,d.jsxs)("div",{className:"text-5xl font-bold text-blue-600 mb-2",children:[y.accuracy,"%"]}),d.jsx("p",{className:"text-gray-500",children:"Accuracy"}),(0,d.jsxs)("p",{className:"mt-2 text-gray-700",children:["You got ",d.jsx("span",{className:"font-medium",children:y.correct})," out of"," ",d.jsx("span",{className:"font-medium",children:y.total})," correct"]})]}),(0,d.jsxs)("div",{className:"space-y-8",children:[d.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Word"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Your Answer"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Article"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Translation"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((e,s)=>(0,d.jsxs)("tr",{onClick:()=>q(e),className:`cursor-pointer hover:bg-gray-50 ${e.isCorrect?"bg-green-50":"bg-red-50"}`,children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.noun.word}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.answer||"Timed out"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.noun.article}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.noun.translation})]},s))})]})}),I&&d.jsx(g.Z,{word:I,onClose:()=>R(null)})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 gap-4 mb-8 sm:grid-cols-3",children:[(0,d.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[d.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Fastest Response"}),(0,d.jsxs)("p",{className:"mt-1 text-2xl font-semibold text-blue-900",children:[y.fastestResponse||"—"," s"]})]}),(0,d.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[d.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Average Time"}),(0,d.jsxs)("p",{className:"mt-1 text-2xl font-semibold text-blue-900",children:[y.averageTime||"—"," s"]})]}),(0,d.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[d.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Timeouts"}),d.jsx("p",{className:"mt-1 text-2xl font-semibold text-blue-900",children:y.timeouts||0})]})]}),d.jsx("div",{className:"text-center",children:d.jsx("button",{type:"button",onClick:()=>{a(!0),i(null),o(null),p([]),f([]),N(null),v(null)},className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Practice Again"})})]}):(0,d.jsxs)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,d.jsxs)("div",{className:"text-sm text-gray-500",children:["Question ",n+1," of ",c.length]}),(0,d.jsxs)("div",{className:"text-sm font-medium bg-blue-100 text-blue-800 px-3 py-1 rounded-full",children:[j,"s remaining"]})]}),(0,d.jsxs)("div",{className:"mb-8 text-center",children:[d.jsx("div",{className:"text-3xl font-bold mb-2",children:c[n]?.word}),c[n]?.translation&&(0,d.jsxs)("div",{className:"text-sm text-gray-500",children:["(",c[n].translation,")"]})]}),d.jsx("div",{className:"grid grid-cols-3 gap-3",children:["der","die","das"].map(e=>d.jsx("button",{onClick:()=>A(e),className:"py-3 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:e},e))})]})]})})}let b=(0,i.l)(r,"default"),f=(0,i.l)(r,"getStaticProps"),j=(0,i.l)(r,"getStaticPaths"),N=(0,i.l)(r,"getServerSideProps"),y=(0,i.l)(r,"config"),v=(0,i.l)(r,"reportWebVitals"),w=(0,i.l)(r,"unstable_getStaticProps"),S=(0,i.l)(r,"unstable_getStaticPaths"),C=(0,i.l)(r,"unstable_getStaticParams"),_=(0,i.l)(r,"unstable_getServerProps"),P=(0,i.l)(r,"unstable_getServerSideProps"),k=new a.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/practice",pathname:"/practice",bundlePath:"",filename:""},components:{App:c.default,Document:o()},userland:r})},1398:(e,s,t)=>{"use strict";t.d(s,{Z:()=>o});var r=t(997),a=t(1664),l=t.n(a),i=t(1163),n=t(3300);function o({children:e}){let s,t,a;let o=(0,i.useRouter)(),{user:c,isLoaded:d}=(0,n.useUser)();return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(l(),{href:"/",legacyBehavior:!0,children:(0,r.jsxs)("a",{className:"flex items-center",children:[r.jsx("div",{className:"bg-blue-500 rounded-full h-8 w-8 flex items-center justify-center text-white font-bold",children:"V"}),r.jsx("span",{className:"ml-2 text-xl font-bold text-blue-500",children:"VOLKARI"})]})}),c&&(0,r.jsxs)("nav",{className:"ml-10 flex space-x-8",children:[r.jsx(l(),{href:"/",legacyBehavior:!0,children:r.jsx("a",{className:`px-3 py-2 text-sm font-medium ${"/"===o.pathname?"text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Home"})}),r.jsx(l(),{href:"/dashboard",legacyBehavior:!0,children:r.jsx("a",{className:`px-3 py-2 text-sm font-medium ${(s="/dashboard",o.pathname===s)?"text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Dashboard"})}),r.jsx(l(),{href:"/practice",legacyBehavior:!0,children:r.jsx("a",{className:`px-3 py-2 text-sm font-medium ${(t="/practice",o.pathname===t)?"text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Practice"})}),r.jsx(l(),{href:"/repository",legacyBehavior:!0,children:r.jsx("a",{className:`px-3 py-2 text-sm font-medium ${(a="/repository",o.pathname===a)?"text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Repository"})})]})]}),d&&r.jsx("div",{className:"flex items-center",children:c?r.jsx(n.UserButton,{afterSignOutUrl:"/",appearance:{elements:{userButtonAvatarBox:{width:"2rem",height:"2rem"}}}}):(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx(l(),{href:"/signin",legacyBehavior:!0,children:r.jsx("a",{className:"text-sm font-medium text-gray-500 hover:text-gray-700",children:"Sign in"})}),r.jsx(l(),{href:"/signup",legacyBehavior:!0,children:r.jsx("a",{className:"text-sm font-medium px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Sign up"})})]})})]})})}),r.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e})]})}},6515:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(997);function a({word:e,onClose:s}){if(!e)return null;let t=[{german:`${e.article} ${e.word} ist sehr wichtig.`,english:`The ${e.translation.toLowerCase()} is very important.`},{german:`Ich sehe ${e.article.toLowerCase()} ${e.word}.`,english:`I see the ${e.translation.toLowerCase()}.`}],a=e.examples||t;return r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsxs)("div",{className:"relative top-20 mx-auto p-6 border w-[32rem] shadow-xl rounded-lg bg-white",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:e.word}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"German Noun"})]}),(0,r.jsxs)("button",{onClick:s,className:"text-gray-400 hover:text-gray-500 p-2 rounded-full hover:bg-gray-100",children:[r.jsx("span",{className:"sr-only",children:"Close"}),r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Article"}),r.jsx("p",{className:"mt-1 text-2xl font-semibold text-blue-900",children:e.article})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Translation"}),r.jsx("p",{className:"mt-1 text-2xl font-semibold text-blue-900",children:e.translation})]})]})}),e.rule&&(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Rule"}),r.jsx("p",{className:"text-gray-600",children:e.rule})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Example Sentences"}),r.jsx("div",{className:"space-y-3",children:a.map((e,s)=>(0,r.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[r.jsx("p",{className:"text-blue-600 font-medium",children:e.german}),r.jsx("p",{className:"text-gray-600 text-sm mt-1",children:e.english})]},s))})]}),e.notes&&(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Additional Notes"}),r.jsx("p",{className:"text-gray-600",children:e.notes})]}),r.jsx("div",{className:"text-center pt-2",children:r.jsx("button",{onClick:s,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Close"})})]})]})})}t(6689)},8316:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});let r=require("@supabase/supabase-js"),a="https://gymnbgklicdjeuhsdjhn.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd5bW5iZ2tsaWNkamV1aHNkamhuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE1MDgwMzgsImV4cCI6MjA1NzA4NDAzOH0.oQ92GvKxpoMBdrVX8SaVzsZkGiLMgL_zxh72zi0cK0g";console.log("Supabase URL set?",!!a),console.log("Supabase Key set?",!!l),a&&l||console.error("Supabase URL or Anon Key is missing. Check your .env.local file.");let i=(0,r.createClient)(a,l,{auth:{persistSession:!1,autoRefreshToken:!1},db:{schema:"public"},global:{headers:{"x-my-custom-header":"practice-app"}}});console.log("Supabase client initialized with URL:",a);let n=i},3414:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(997),a=t(3300);t(6764);let l=function({Component:e,pageProps:s}){return r.jsx(a.ClerkProvider,{children:r.jsx(e,{...s})})}},6764:()=>{},3300:e=>{"use strict";e.exports=require("@clerk/nextjs")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[899,342,664],()=>t(4824));module.exports=r})();